create database todoapp;

use todoapp;

create table countries
(
country_id int not null auto_increment primary key,
country varchar(30) not null unique key
);

create table status
(
status_id int not null auto_increment primary key,
status varchar(10) not null unique key
);

insert into countries 
(country)
values
('Bharat'),('UK'),('US'),('Australia'),('China'),('Shrilanka');

insert into status 
(status)
values
('Active'),('Inactive'),('Closed'),('Blocked'),('Deleted'),('Done'),
('Accepted'),('Declined'),('Pending'),('Removed');


create table users
(
user_id int not null primary key auto_increment,
user_name varchar(30) not null,
email varchar(60) not null unique,
password varchar(12) not null,
created datetime not null,
country_id int,
constraint fk_user_countries foreign key (country_id) references countries (country_id),
status_id int not null default 2,
constraint fk_users_status foreign key (status_id) references status (status_id)
);


create table todolist
(
todolist_id int not null auto_increment primary key,
title varchar(45) not null,
created datetime not null,
user_id int not null,
constraint fk_todolist_users foreign key (user_id) references users (user_id),
status_id int not null default 1,
constraint fk_todolist_status foreign key (status_id) references status (status_id)
);


create table todosteps
(
todostep_id int not null auto_increment primary key,
todostep varchar(100) not null,
todolist_id int not null,
status_id int not null default 1,
constraint fk_todosteps_todolist foreign key (todolist_id) references todolist (todolist_id),
constraint fk_todosteps_status foreign key (status_id) references status (status_id)
);


create table connects
(
connect_id int not null auto_increment primary key,
a_user_id int not null,
b_user_id int not null,
status_id int not null default 9,
constraint fk_connects_status foreign key (status_id) references status (status_id),
constraint fk_connects_users_a foreign key (a_user_id) references users (user_id),
constraint fk_connects_users_b foreign key (b_user_id) references users (user_id)
);


create table todo_teams
(
todo_team_id int not null primary key auto_increment,
todolist_id int not null,
user_id int not null,
status_id int not null default 1,
constraint fk_todoteams_todolist foreign key (todolist_id) references todolist (todolist_id),
constraint fk_todoteams_status foreign key (status_id) references status (status_id),
constraint fk_todoteams_users foreign key (user_id) references users (user_id)
);

